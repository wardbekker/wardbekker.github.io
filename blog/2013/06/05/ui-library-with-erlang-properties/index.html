
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>UI library with Erlang properties - Ward Bekker</title>
  <meta name="author" content="Ward Bekker">

  
  <meta name="description" content="I worked with Cocoa Touch, Windows Forms Why isn&rsquo;t there a UI library that took a page out of the Erlang book? Let me explain what I mean by &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.equanimity.nl/blog/2013/06/05/ui-library-with-erlang-properties">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ward Bekker" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40429950-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.equanimity.nl" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">UI Library With Erlang Properties</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-05T13:46:00+02:00" pubdate data-updated="true">Jun 5<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I worked with Cocoa Touch, Windows Forms</p>

<p>Why isn&rsquo;t there a UI library that took a page out of the Erlang book?</p>

<p>Let me explain what I mean by explaining what the concepts are in
cocoa, and how I would like them to be more Erlang like.</p>

<h2>State</h2>

<p>The user interface of an iPhone program is a visual representation of
the program state. User interacts with the program using touch events, and triggers a state mutation which is reflected on the UI.</p>

<p>Where is the state kept in an Objective-C program?</p>

<p>I want to make the point that state it all over the place.</p>

<ul>
<li>UIView hirarchy &ndash;> buttons, labels, controllers, bar items, tableview</li>
<li>Models &ndash;> core data</li>
<li>Singletons, connections, notification,</li>
</ul>


<p>Drawing the possible states as a statemachine is near impossible. But that complexity is what a UI programmer needs to work with.  Which means that it&rsquo;s pretty easy to end up with the UI in an unwanted state. That&rsquo;s what I think is one of the reasons that UI programming is so damn hard.</p>

<p>To make this easier, we need to minimize the possible states the program can be in. Or perhaps declare the allowed states.</p>

<p>In erlang we have gen_fsm. It&rsquo;s a finite state machine process. It defines the possible states, and the allowed state transitions.</p>

<p>So, wouldn&rsquo;t it be great if every individual screen of an iPhone app is actually a single proces, with defined states and state transitions.</p>

<p>[ Example state diagram here]</p>

<h2>Concurrency</h2>

<p>Most concurrency in Objective-C seems to be done using callbacks. So you call a method and specify with method needs to be called when finished with the result.  In the meantime the caller can do other stuff, mostly being able to be ready for new user input.</p>

<p>If you don&rsquo;t contain yourself, you will likely end up some form of callback hell. Callbacks are also called the modern version of GOTO&rsquo;s.</p>

<p><a href="http://elm-lang.org/learn/Escape-from-Callback-Hell.elm">http://elm-lang.org/learn/Escape-from-Callback-Hell.elm</a></p>

<p>What I rather would like to see, is the Erlang actor model. If your screen is a gen_fsm, you</p>

<p>how does the no shared state make this easier.</p>

<p>clean seperation.  so the gen_fsm receives the &lsquo;refresh&rsquo; event. It does a async cast to a  &lsquo;gen_server&rsquo; and  It possibly goes into the refreshing state. When the gen_server is done with his business. It will send a &lsquo;data_ready&rsquo; event to the gen_fsm together with the data. The &lsquo;gen_fsm&rsquo; will transistion in the new state.</p>

<p>This looks similar to callbacks, but definitly isn&rsquo;t. There is no shared state, only message passing between actors that have independent thread of control.</p>

<p>Which type of problems don&rsquo;t occur then. What&rsquo;s the difference?</p>

<p>You don&rsquo;t relegate the control on when a block of code is executed.  etc.</p>

<h2>Fault tolerance</h2>

<p>In objective-c, if you don&rsquo;t handle all possible states (and those are many, as we noted before) correctly your app will crash in the ugliest way possible.</p>

<p>Using the Erlang supervisor model, where crashing processes are restarted, this might mean that a single screen will crash, but the app stays functional. You might for example go back to the previous screen in that case. Or the process get&rsquo;s restarted and you can go one with your business.</p>

<h2>Hot code loading</h2>

<p>This could be cool for two reasons in an iPhone app:</p>

<ul>
<li>in production: automatic live upgrades. Don&rsquo;t you just hate that you constantly manuall update the apps?</li>
<li>in development: this is probably for me the biggest advantage. When developing an Objective-C program I constantly need to run the app in the simulator, log in, go the the feature I&rsquo;m developing, testing if I fixed the problem,</li>
</ul>


<p>As part of my daytime work I sometimes program iPhone apps in
Objective-C.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ward Bekker</span></span>

      








  


<time datetime="2013-06-05T13:46:00+02:00" pubdate data-updated="true">Jun 5<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.equanimity.nl/blog/2013/06/05/ui-library-with-erlang-properties/" data-via="wardbekker" data-counturl="http://blog.equanimity.nl/blog/2013/06/05/ui-library-with-erlang-properties/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/06/04/continuous-integration-for-erlang-with-travis-ci/" title="Previous Post: Continuous Integration for Erlang with Travis-CI">&laquo; Continuous Integration for Erlang with Travis-CI</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ward Bekker <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wardbekkerblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.equanimity.nl/blog/2013/06/05/ui-library-with-erlang-properties/';
        var disqus_url = 'http://blog.equanimity.nl/blog/2013/06/05/ui-library-with-erlang-properties/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ward Bekker</title>
  <meta name="author" content="Ward Bekker">
  <a href="https://plus.google.com/104578455602310184371" rel="publisher" />

  
  <meta name="description" content="Erlang ‘One weird trick’ Goodiebag (Draft) I&rsquo;ve asked the Erlang twittersphere what they think every Erlang developer should know about. The &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.equanimity.nl">

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128" />
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="mstile-310x310.png" />

  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Ward Bekker" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40429950-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h1>Ward Bekker</h1>
  
    <h2><a href="/">WB</a></h2>
  
</hgroup>

</header>
  <nav role="navigation">
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.equanimity.nl" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/15/erlang-one-weird-trick-goodiebag/">Erlang ‘One Weird Trick’ Goodiebag</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-15T08:47:22+01:00" pubdate data-updated="true">Mar 15<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/03/15/erlang-one-weird-trick-goodiebag/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Erlang ‘One weird trick’ Goodiebag (Draft)</h1>

<p>I&rsquo;ve asked the Erlang twittersphere what they think every Erlang developer should know about. The result is this Erlang random goodiebag. I would love to hear you &lsquo;One weird trick&rsquo; in the comments!</p>

<p><a href="https://twitter.com/wardbekker">Follow me on Twitter</a></p>

<h2>etop &ndash; Erlang Top</h2>

<p>Erlang Top, <code>etop</code> is an Erlang application for presenting information about erlang processes similar to the information presented by <code>top</code> in UNIX.</p>

<p>You start it with the following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>erl -sname etop  -hidden -s etop -s erlang halt -output text node@host</span></code></pre></td></tr></table></div></figure>


<p>(Replace <code>node@host</code> with the correct node name).</p>

<p>Output shows you the CPU load, memory allocation and more:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Erlang/OTP 17 [erts-6.3] [source] [64-bit] [smp:2:2] [async-threads:10] [hipe] [kernel-poll:false]
</span><span class='line'>
</span><span class='line'>Eshell V6.3  (abort with ^G)
</span><span class='line'>(etop@appfelstrudelUSA)1&gt;
</span><span class='line'>========================================================================================
</span><span class='line'> etop@appfelstrudelUSA                                                     07:32:52
</span><span class='line'>  Load:  cpu         0               Memory:  total       12642    binary        699
</span><span class='line'>          procs      34                        processes    4315    code         4321
</span><span class='line'>                  runq        0                        atom          198    ets           240
</span><span class='line'>
</span><span class='line'>Pid            Name or Initial Func    Time    Reds  Memory    MsgQ Current Function
</span><span class='line'>----------------------------------------------------------------------------------------
</span><span class='line'>&lt;0.3.0&gt;        erl_prim_loader          '-'  159565  109232       0 erl_prim_loader:loop
</span><span class='line'>&lt;0.26.0&gt;       code_server              '-'   88670  142784       0 code_server:loop/1
</span><span class='line'>&lt;0.11.0&gt;       kernel_sup               ‘-‘   53137  197408       0 gen_server:loop/6
</span><span class='line'>&lt;0.7.0&gt;        application_controll     ‘-‘    6790  263984       0 gen_server:loop/6
</span><span class='line'>&lt;0.0.0&gt;        init                     ‘-‘    5223   18624       0 init:boot_loop/2
</span><span class='line'>&lt;0.33.0&gt;       erlang:apply/2           ‘-‘    4026  197048       0 shell:get_command1/5
</span><span class='line'>&lt;0.2.0&gt;        etop_server              ‘-‘    1622   34360       0 etop:data_handler/2
</span><span class='line'>&lt;0.20.0&gt;       auth                     ‘-‘     831    7688       0 gen_server:loop/6
</span><span class='line'>&lt;0.21.0&gt;       net_kernel               ‘-‘     710    7136       0 gen_server:loop/6
</span><span class='line'>&lt;0.30.0&gt;       user_drv                 ‘-‘     409   13800       0 user_drv:server_loop
</span><span class='line'>========================================================================================</span></code></pre></td></tr></table></div></figure>


<p><a href="http://www.erlang.org/doc/apps/observer/etop_ug.html">More information about <code>etop</code> can be found in the docs</a></p>

<p>h/t to <a href="https://twitter.com/mmzeeman">@mmzeeman</a></p>

<h2>Erlang Remote Shell</h2>

<p>As you can <code>ssh</code> into another server, you can also connect to the <a href="http://www.erlang.org/doc/man/shell.html">shell</a> of a remote Erlang node. This allows you to inspect the live state of the system. Very powerful.</p>

<p>Below an example session where stop the <code>mnesia</code> application on the live node from the remote shell</p>

<p>Start up the ‘live’ node and start the <code>mnesia</code> application:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$&gt; erl -sname live@localhost
</span><span class='line'>Erlang/OTP 17 [erts-6.2] [source-aaaefb3] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]
</span><span class='line'>
</span><span class='line'>Eshell V6.2  (abort with ^G)
</span><span class='line'>(live@localhost)1&gt; application:start(mnesia).
</span><span class='line'>ok
</span><span class='line'>(live@localhost)2&gt;</span></code></pre></td></tr></table></div></figure>


<p>In another terminal window, connect to the live shell and try to start mnesia again. Notice it is already started, and we can stop the application.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$&gt; erl -remsh live@localhost -sname debug@localhost
</span><span class='line'>Erlang/OTP 17 [erts-6.2] [source-aaaefb3] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]
</span><span class='line'>
</span><span class='line'>Eshell V6.2  (abort with ^G)
</span><span class='line'>(live@localhost)1&gt; application:start(mnesia).
</span><span class='line'>{error,{already_started,mnesia}}
</span><span class='line'>(live@localhost)2&gt; application:stop(mnesia).
</span><span class='line'>ok
</span><span class='line'>(live@localhost)2&gt;</span></code></pre></td></tr></table></div></figure>


<p>Notice the info report on the previous terminal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>live@localhost)2&gt;
</span><span class='line'>=INFO REPORT==== 11-Mar-2015::09:46:08 ===
</span><span class='line'>application: mnesia
</span><span class='line'>exited: stopped
</span><span class='line'>type: temporary
</span><span class='line'>=INFO REPORT==== 11-Mar-2015::09:46:08 ===</span></code></pre></td></tr></table></div></figure>


<p>h/t to <a href="https://twitter.com/aeden">@aeden</a></p>

<h2>Throw As Default Value</h2>

<p>Erlang, and OTP, is build on the coding philosophy <a href="http://c2.com/cgi/wiki?LetItCrash">“Let It Crash”</a>. The view is that you don’t need to program defensively. If there are any errors, the process is automatically terminated, and this is reported to any processes that were monitoring the crashed process. In fact, defensive programming in Erlang is frowned upon.</p>

<p>Record fields that are not given a value, are initialized with the value <code>undefined</code>. Like <code>null</code> in other programming languages, <code>undefined</code> is <a href="http://c2.com/cgi/wiki?NullIsaHack">considered a hack</a>.</p>

<p>So to prevent <code>undefined</code> field values in records, why not just make throw the default?</p>

<p>Example module:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">test</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">do1</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">do2</span><span class="o">/</span><span class="mi">0</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">record</span><span class="p">(</span><span class="nl">foobar</span><span class="p">,</span> <span class="p">{</span> <span class="n">bla</span> <span class="o">=</span> <span class="n">throw</span><span class="p">(</span><span class="err">“</span><span class="n">record</span> <span class="n">field</span> <span class="ow">not</span> <span class="n">assigned</span> <span class="n">a</span> <span class="n">value</span><span class="err">”</span><span class="p">)</span> <span class="p">}).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">do1</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="nv">F</span> <span class="o">=</span> <span class="nl">#foobar</span><span class="p">{},</span>
</span><span class='line'>        <span class="nv">F</span><span class="nl">#foobar.bla</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">do2</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="nv">F</span> <span class="o">=</span> <span class="nl">#foobar</span><span class="p">{</span> <span class="n">bla</span> <span class="o">=</span> <span class="err">“</span><span class="n">orange</span><span class="err">”</span><span class="p">},</span>
</span><span class='line'>        <span class="nv">F</span><span class="nl">#foobar.bla</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">2</span><span class="o">&gt;</span> <span class="nn">test</span><span class="p">:</span><span class="nf">do1</span><span class="p">().</span>
</span><span class='line'><span class="o">**</span> <span class="n">exception</span> <span class="nn">throw</span><span class="p">:</span> <span class="err">“</span><span class="n">record</span> <span class="n">field</span> <span class="ow">not</span> <span class="n">assigned</span> <span class="n">a</span> <span class="n">value</span><span class="err">”</span>
</span><span class='line'><span class="n">in</span> <span class="n">function</span>  <span class="nn">test</span><span class="p">:</span><span class="n">do1</span><span class="o">/</span><span class="mi">0</span> <span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">erl</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="mi">3</span><span class="o">&gt;</span> <span class="nn">test</span><span class="p">:</span><span class="nf">do2</span><span class="p">().</span>
</span><span class='line'><span class="err">“</span><span class="n">orange</span><span class="err">”</span>
</span><span class='line'><span class="mi">4</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>h/t to <a href="https://twitter.com/lambdadmitry">@lambdadmitry</a></p>

<h2>List Comprehension without generators</h2>

<p>A typical <a href="http://www.erlang.org/doc/programming_examples/list_comprehensions.html">list comprehension</a> expression, like <code>Xs = [X ||| X &lt;- [1,2,3]]</code>, contains the generator <code>X &lt;- [1,2,3]</code>. But a list comprehension is <em>not required</em> to contain one or more generators.</p>

<p>This allows you to rewrite this case expression:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="nv">Z</span> <span class="o">=</span> <span class="k">case</span> <span class="nv">Y</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">of</span>
</span><span class='line'>      <span class="n">true</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">X</span><span class="p">];</span>
</span><span class='line'>      <span class="n">false</span> <span class="o">-&gt;</span> <span class="p">[]</span>
</span><span class='line'>   <span class="k">end</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Into this short list comprehension: <code>Z = [X || Y &gt; 2]</code>.</p>

<p>A real world example of this pattern can be found in the OTP code base:</p>

<p><a href="https://github.com/erlang/otp/blob/735871e6/lib/compiler/src/compile.erl#L1713-1714">https://github.com/erlang/otp/..src/compile.erl#L1713-1714</a>
<a href="https://github.com/erlang/otp/blob/735871e6/lib/compiler/src/v3_codegen.erl#L970-973">https://github.com/erlang/otp/..src/v3_codegen.erl#L970-973</a></p>

<p>h/t to <a href="https://twitter.com/nokusu">@nokusu</a></p>

<h2>Inspecting process status in remote shell</h2>

<p>With <a href="http://www.erlang.org/doc/man/sys.html#get_status-1"><code>sys:get_status</code></a> you can quickly inspect the process status on your live node through <a href="#erlang-remote-shell-by-aeden">a remote shell</a>.</p>

<p>Below we inspect the status of a sample <code>test_foo_ser</code> process, which implements the <code>gen_server</code> behaviour. Among the information we get the callback module’s state <code>{“State”,{state,”bar”,”oranges”}</code>. A <code>gen_fsm</code> process returns information such as its current state name and state data, and a <code>gen_event</code> process returns information about each of its registered handlers.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">2</span><span class="o">&gt;</span> <span class="nn">sys</span><span class="p">:</span><span class="nf">get_status</span><span class="p">(</span><span class="n">test_foo_ser</span><span class="p">).</span>
</span><span class='line'><span class="p">{</span><span class="n">status</span><span class="p">,</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">38</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="p">{</span><span class="n">module</span><span class="p">,</span><span class="n">gen_server</span><span class="p">},</span>
</span><span class='line'><span class="p">[[{</span><span class="err">‘</span><span class="sc">$a</span><span class="n">ncestors</span><span class="err">’</span><span class="p">,[</span><span class="n">test_sup</span><span class="p">,</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">36</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">]},</span>
</span><span class='line'><span class="p">{</span><span class="err">‘</span><span class="sc">$i</span><span class="n">nitial_call</span><span class="err">’</span><span class="p">,{</span><span class="n">test_foo_ser</span><span class="p">,</span><span class="n">init</span><span class="p">,</span><span class="mi">1</span><span class="p">}}],</span>
</span><span class='line'><span class="n">running</span><span class="p">,</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">37</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,[],</span>
</span><span class='line'><span class="p">[{</span><span class="n">header</span><span class="p">,</span><span class="err">”</span><span class="nv">Status</span> <span class="n">for</span> <span class="n">generic</span> <span class="n">server</span> <span class="n">test_foo_ser</span><span class="err">”</span><span class="p">},</span>
</span><span class='line'><span class="p">{</span><span class="n">data</span><span class="p">,[{</span><span class="err">“</span><span class="nv">Status</span><span class="err">”</span><span class="p">,</span><span class="n">running</span><span class="p">},</span>
</span><span class='line'><span class="p">{</span><span class="err">“</span><span class="nv">Parent</span><span class="err">”</span><span class="p">,</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">.</span><span class="mi">37</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">},</span>
</span><span class='line'><span class="p">{</span><span class="err">“</span><span class="nv">Logged</span> <span class="n">events</span><span class="err">”</span><span class="p">,[]}]},</span>
</span><span class='line'><span class="p">{</span><span class="n">data</span><span class="p">,[{</span><span class="err">“</span><span class="nv">State</span><span class="err">”</span><span class="p">,{</span><span class="n">state</span><span class="p">,</span><span class="err">”</span><span class="n">bar</span><span class="err">”</span><span class="p">,</span><span class="err">”</span><span class="n">oranges</span><span class="err">”</span><span class="p">}}]}]]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>h/t to <a href="https://twitter.com/OliverFerrigni">@OliverFerrigni</a></p>

<h2>Recon, dialyzer, quickcheck &amp; use iolists to save memory</h2>

<p>A bunch of good tips by <a href="https://twitter.com/zkessin">@zkessin</a>:</p>

<ul>
<li>Recon (<a href="http://ferd.github.io/recon/">docs</a>, <a href="https://github.com/ferd/recon">github</a>) aims “to be a set of tools usable in production to diagnose Erlang problems or inspect production environment <em>safely</em>”. Safely, as you don’t want to endanger the uptime of a live node.</li>
<li>Dialyzer: In the past, very smart people tried to come up with a good static type system for Erlang. They couldn’t create one without throwing away some of Erlang’s magic, like hot code loading. Bummer, dude. Instead you can add type-annotations to your code, and check them with a tool called <a href="http://learnyousomeerlang.com/dialyzer">Dialyzer</a>. It’s a sweet alternative to a static type system.</li>
<li>Quickcheck: Unit testing is nice, but it has a big weakness for which Quickcheck is the solution. I’ve tried to explain this issue in a previous post <a href="http://blog.equanimity.nl/blog/2013/06/04/continuous-integration-for-erlang-with-travis-ci/">Continuous Integration for Erlang With Travis-CI</a>. Also, <a href="https://twitter.com/zkessin">@zkessin</a> just published a <a href="http://www.erlang-quickcheck-book.com">Testing Erlang With Quickcheck e-book</a> that you might want to check out.</li>
<li>Using iolists to save memory. //TODO</li>
</ul>


<h2>Observer via X11</h2>

<p>//TODO</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/08/3-best-pomodoro-timers-for-iphone/">3 Best Pomodoro Timer Apps for iPhone</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-08T08:24:51+01:00" pubdate data-updated="true">Dec 8<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/12/08/3-best-pomodoro-timers-for-iphone/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are plenty of Pomodoro apps out there, but only a few great ones. If you are a fan of the <a href="http://pomodorotechnique.com">Pomodoro technique</a>, you probably should be using one of these iPhone apps.</p>

<p>The following list is <strong>my selection of 3 great Pomodoro Timer apps</strong>, designed for iPhone.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/12/08/3-best-pomodoro-timers-for-iphone/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/15/5-great-todo-apps-for-mac/">5 Great TODO Apps for Mac</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-11-15T13:51:41+01:00" pubdate data-updated="true">Nov 15<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/11/15/5-great-todo-apps-for-mac/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are plenty of great TODO apps out there. If you want stop procrastinating and become super productive, you probably should be using one of these desktop Mac apps.</p>

<p>The following list is <strong>my selection of 5 great TODO apps</strong>, designed for your Mac desktop.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/11/15/5-great-todo-apps-for-mac/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/14/5-great-writing-apps-for-mac/">5 Great Writing Apps for Mac</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-11-14T21:33:50+01:00" pubdate data-updated="true">Nov 14<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/11/14/5-great-writing-apps-for-mac/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are plenty of great writing apps out there. If you want to focus on writing, you probably should be using one of these desktop Mac apps.</p>

<p>The following list is <strong>my selection of 5 great writing apps</strong>, designed for your Mac desktop that sync nicely with their iOS counterparts.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/11/14/5-great-writing-apps-for-mac/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/08/my-5-tips-for-new-runners/">My 5 Tips for New Runners</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-08T10:19:32+02:00" pubdate data-updated="true">Oct 8<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/10/08/my-5-tips-for-new-runners/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yours truly started running just over 7 months ago with the goal to get into shape. I dropped 17 KG since and now really enjoy running. I even finished my first 10 miles race! (1:21:05). Here are 5 things that I learned in the process;</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/10/08/my-5-tips-for-new-runners/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/13/cloudkit-storage-and-data-transfers/">Notes on CloudKit Storage and Data Transfers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-13T10:32:45+02:00" pubdate data-updated="true">Jun 13<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/06/13/cloudkit-storage-and-data-transfers/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>At WWDC14 Apple announced Cloudkit, a new <a href="http://en.wikipedia.org/wiki/Backend_as_a_service">Backend as a Service</a>(Baas). Storage of structured data and assets are offered for free, with limits. In this post I&rsquo;m attempting to give you more detail and background on this free plan.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/06/13/cloudkit-storage-and-data-transfers/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/08/5-great-pomodoro-apps-for-mac/">5 Great Pomodoro Apps for Mac</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-08T16:04:14+02:00" pubdate data-updated="true">May 8<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/05/08/5-great-pomodoro-apps-for-mac/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are plenty of great Pomodoro apps out there. If you are a fan of the <a href="http://pomodorotechnique.com">Pomodoro technique</a>, you probably should be using one of these desktop Mac apps.</p>

<p>The following list is <strong>my selection of 5 great Pomodoro Timer apps</strong>, designed for your Mac desktop.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/05/08/5-great-pomodoro-apps-for-mac/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/09/erlang-r17-on-osx-with-wx-and-a-working-observer/">Erlang/OTP 17.0 on OSX Mavericks With WX and a Working Observer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-09T19:53:00+02:00" pubdate data-updated="true">Apr 9<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/04/09/erlang-r17-on-osx-with-wx-and-a-working-observer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Update April 15 &ndash; 2014: Erlang/OTP 17.0 with a working WX library is now also available through <a href="http://brew.sh">Homebrew</a>: <code>brew install wxmac erlang</code>. HT <a href="https://twitter.com/dch__">@dhc_</a></em></p>

<p><em>This post is an update of <a href="/blog/2014/02/09/erlang-r17-rc1-on-osx-with-wx-and-a-working-observer/">HOWTO: &ldquo;Erlang R17-RC2 on OSX Mavericks with WX and a working Observer&rdquo;</a>.</em></p>

<h2>The best Erlang yet</h2>

<p>Today&rsquo;s Erlang/OTP 17.0 release is &lsquo;the best Erlang yet&rsquo; and contains two significant language changes: <a href="http://learnyousomeerlang.com/maps">Maps</a> and <a href="http://joearms.github.io/2014/02/01/big-changes-to-erlang.html">Named arguments in funs</a>.</p>

<p>Erlang uses wxWidgets, a cross platform GUI library for it&rsquo;s GUI tools. This build dependency was hard to get working pre-17, especially for 64-bit Erlang. However, 17.0 brings double rainbows and care bears for everyone that reads this HOWTO. So Enjoy!</p>

<p><img src="https://www.evernote.com/shard/s48/sh/452a5f9c-08b3-4153-9dfd-f9444f7484ce/4e0c4c8bb7d8726d3ab482e4330955c8/deep/0/nonode@nohost.png" alt="nonode@nohost" /></p>

<h2>Set correct Xcode path for compilation</h2>

<p>As far as I know you need have Xcode install to compile Erlang from source. You can <a href="https://itunes.apple.com/nl/app/xcode/id497799835?mt=12">download Xcode</a> via the Mac App Store</p>

<p>If you have multiple versions of Xcode installed (beta&rsquo;s for example), make sure the <a href="http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/">Command Line Tools</a> are installed and are pointing to the correct Xcode version.</p>

<p>Initiating an install of the Xcode Command Line Tools:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>xcode-select --install
</span></code></pre></td></tr></table></div></figure>


<p>And verify that the CL-tools point to the correct Xcode install</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>xcode-select -s /Applications/Xcode.app/Contents/Developer
</span></code></pre></td></tr></table></div></figure>


<h2>Install wxWidgets</h2>

<p><a href="http://www.wxwidgets.org">wxWidgets</a> is a Cross Platform GUI library that&rsquo;s used by Erlang for applications like Observer.</p>

<p>Execute this line and get some coffee, walk the dog, take out the trash and/or play with your kids. Compilation takes a while.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -O http://optimate.dl.sourceforge.net/project/wxwindows/3.0.0/wxWidgets-3.0.0.tar.bz2
</span><span class='line'><span class="nv">$ </span>tar xvjf wxWidgets-3.0.0.tar.bz2
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>wxWidgets-3.0.0.tar.bz2
</span><span class='line'><span class="nv">$ </span>./configure --with-cocoa --prefix<span class="o">=</span>/usr/local
</span><span class='line'><span class="nv">$ </span>make <span class="o">&amp;&amp;</span> sudo make install
</span><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/bin:<span class="nv">$PATH</span>
</span></code></pre></td></tr></table></div></figure>


<p>Check that you got the correct wx-config</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>which wx-config
</span></code></pre></td></tr></table></div></figure>


<h2>Install kerl</h2>

<p><a href="https://github.com/spawngrid/kerl">Kerl</a> is a utility that helps you build and manage multiple instances of Erlang/OTP.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -O https://raw.github.com/spawngrid/kerl/master/kerl
</span><span class='line'><span class="nv">$ </span>chmod a+x kerl
</span></code></pre></td></tr></table></div></figure>


<p>Create <code>~/.kerlrc</code>. I use <code>$ vim ~/.kerlrc</code>.</p>

<p>Add these lines:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">KERL_CONFIGURE_OPTIONS</span><span class="o">=</span><span class="s2">&quot;--disable-debug --without-javac --enable-shared-zlib --enable-dynamic-ssl-lib --enable-hipe --enable-smp-support --enable-threads --enable-kernel-poll --with-wx&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Build &amp; Install Erlang with kerl</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>kerl update releases
</span><span class='line'><span class="nv">$ </span>kerl build 17.0 17.0
</span></code></pre></td></tr></table></div></figure>


<p>For a 32-bit Erlang prefix <code>kerl build</code> with <code>CPPFLAGS</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ CPPFLAGS</span><span class="o">=</span><span class="s2">&quot;-arch i386&quot;</span> kerl build 17.0 17.0
</span></code></pre></td></tr></table></div></figure>


<p>Install:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>kerl install 17.0 ~/erlang_17_0
</span></code></pre></td></tr></table></div></figure>


<p>Activate:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>. ~/erlang_17_0/activate
</span></code></pre></td></tr></table></div></figure>


<p>And bliss out on your new wx-enabled Erlang:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>erl -s observer start
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/29/your-first-erlang-program/">Your First Erlang Program (in Style).</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-29T20:21:15+01:00" pubdate data-updated="true">Mar 29<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/03/29/your-first-erlang-program/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Always wanted to learn <a href="http://www.erlang.org">Erlang</a>? Let&rsquo;s create your first Erlang &ldquo;Hello World&rdquo; program in style!</p>

<p>In this HOWTO I&rsquo;ll show you how to setup a bleeding edge Erlang development VPS and how to run you first Erlang program.</p>

<h1>Main ingredient: Cores</h1>

<p>Erlang&rsquo;s main strength is it&rsquo;s concurrency support. It likes cores, so for our &lsquo;Hello World&rsquo; program we obviously need cores. Lot&rsquo;s! Not 4, not 8, 20!</p>

<p>Create an account on <a href="https://www.digitalocean.com/?refcode=0d0404fa1c5c">Digital Ocean</a> if you don&rsquo;t have one yet (love them) and we&rsquo;re going to boot up their biggest instance. It&rsquo;s a steal at less than 1 dollar per hour. Just make sure you destroy it when done.</p>

<p>64GB and 20 cores will make our Hello World so snappy!</p>

<p><img src="https://www.evernote.com/shard/s48/sh/b5a389c7-cd10-4e3f-a099-7f87968e2ec3/211a356f730703fcad9d4c6eb16ba1c7/deep/0/Fullscreen-29-03-14-21-36.png" alt="Fullscreen%2029/03/14%2021:36" /></p>

<ul>
<li>Pick a datacenter location near you.</li>
<li>Select the latest version of Ubuntu: 13.10 x64.</li>
<li>Create the Droplet.</li>
<li>And ssh to your Droplet with the credentials received from Digital Ocean: <code>ssh root@your_ip_address</code>.</li>
</ul>


<h1>Bleeding Edge Erlang</h1>

<p>We&rsquo;re going to compile Erlang from it&rsquo;s github repository master branch, At the time of writing it&rsquo;s a few commits after R17 release candidate 2 which comes with a Hipe LLVM backend, maps and named funs. If that doesn&rsquo;t make any sense, no worries, just remember it&rsquo;s the fastest Erlang yet. And fast is good.</p>

<p>Install the required Ubuntu packages:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>apt-get install tmux build-essential emacs24 git-core libncurses5-dev libssl-dev autconf htop
</span></code></pre></td></tr></table></div></figure>


<p>Fire up <a href="http://tmux.sourceforge.net">Tmux</a>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>tmux
</span></code></pre></td></tr></table></div></figure>


<p>Install <a href="https://github.com/spawngrid/kerl">Kerl</a>, a tool which makes building and switching Erlang versions easy.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -O https://raw.github.com/spawngrid/kerl/master/kerl
</span><span class='line'><span class="nv">$ </span>chmod a+x kerl
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s add some good configuration options for our Erlang installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>emacs .kerlrc
</span></code></pre></td></tr></table></div></figure>


<p>And add</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>KERL_CONFIGURE_OPTIONS=&quot;--disable-debug --without-javac --enable-shared-zlib --enable-dynamic-ssl-lib --enable-hipe --enable-smp-support --enable-threads --enable-kernel-poll&quot;
</span></code></pre></td></tr></table></div></figure>


<p>And because we can, we forge our Erlang installation on 20 cores. <strong>Muahahaha.</strong></p>

<p>To see those cores sweat for you on compilation, create another tmux window <code>CTRL-b c</code> and run <code>htop</code>.</p>

<p><img src="https://www.evernote.com/shard/s48/sh/49c6830d-6d0f-45e6-958a-6d262050b709/0b252a604ad067fa75f37345d8f59a84/deep/0/Fullscreen-29-03-14-21-52.png" alt="Fullscreen%2029/03/14%2021:52" /></p>

<p>Besides the eye candy, compilation finishes under 5 minutes on a 20 core Digital Ocean Droplet. Whoop!</p>

<p>To start compilation of Erlang:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">MAKEFLAGS</span><span class="o">=</span>-j20 <span class="o">&amp;&amp;</span> ./kerl build git git://github.com/erlang/otp.git master erlang_llvm
</span></code></pre></td></tr></table></div></figure>


<p>After compilation we need to install the build and activate it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>kerl install erlang_llvm erlang_llvm
</span><span class='line'><span class="nv">$ </span>. ~/erlang_llvm/activate
</span></code></pre></td></tr></table></div></figure>


<p>Great! We are now ready for our Pièce de résistance.</p>

<h1>Just say: Hello!</h1>

<p>Real Erlang hacker use Emacs, so let&rsquo;s setup Emacs for Erlang development.</p>

<p>Fetch a good base config for Emacs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -o https://gist.githubusercontent.com/wardbekker/22a1bd79eb93af85fde0/raw/41eb32cbe1bc231c21fba8ec090e537805de2c58/.emacs
</span></code></pre></td></tr></table></div></figure>


<p>Start up Emacs <code>emacs</code>. It will complain that it can&rsquo;t find <a href="https://github.com/ericbmerritt/projmake-mode">projmake-mode</a>. Let&rsquo;s fix that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>ESC<span class="o">]</span>-x package-install <span class="o">[</span>Enter<span class="o">]</span> projmake-mode
</span></code></pre></td></tr></table></div></figure>


<p>Exit emacs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>CTRL<span class="o">]</span>-x <span class="o">[</span>CTRL<span class="o">]</span>-c
</span></code></pre></td></tr></table></div></figure>


<p>Start up Emacs again <code>emacs</code>. Great! We can finally start writing our &ldquo;Hello World&rdquo; program. Oh, not, wait. First, we create a <code>projmake</code> file. The file is needed by <a href="https://github.com/ericbmerritt/projmake-mode">Projmake-mode</a>, a Flymake inspired mode that compiles your program on every save and shows build errors and warnings inline. Really useful!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>CRTL<span class="o">]</span>-x f projmake <span class="o">[</span>Enter<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add these line and save the file</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">projmake</span>
</span><span class='line'> <span class="ss">:name</span>  <span class="s">&quot;Hello&quot;</span>
</span><span class='line'> <span class="ss">:shell</span> <span class="s">&quot;erlc +native hello.erl&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ok, now we can really start writing our &ldquo;Hello World&rdquo; program and put those 20 cores and 64GB RAM to good use.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="nv">[CTRL]-x</span> <span class="nv">f</span> <span class="nv">hello.erl</span> <span class="nv">[Enter]</span>
</span></code></pre></td></tr></table></div></figure>


<p>And type or paste:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">hello</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">just_say</span><span class="o">/</span><span class="mi">0</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">just_say</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="n">io_format</span><span class="p">(</span><span class="s">&quot;hello</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">[]).</span>
</span></code></pre></td></tr></table></div></figure>


<p>And save with <code>[CTRL]-x [CTRL]-s</code>.</p>

<p>Whoops. We made an error as projmake-mode shows:</p>

<p><img src="https://www.evernote.com/shard/s48/sh/ef7fb886-9179-40ea-966e-cdffb8d5d303/b1b324c0e4021c9dac5b320f79f168ab/deep/0/Fullscreen-29-03-14-21-24.png" alt="Fullscreen%2029/03/14%2021:24" /></p>

<p>Replace <code>io_format</code> with <code>io:format</code> and save again. That fixes our error!.</p>

<p>Let&rsquo;s run our program. Fire up the Erlang shell with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">[</span><span class="nv">ESC</span><span class="p">]</span><span class="o">-</span><span class="n">x</span> <span class="n">erlang</span><span class="o">-</span><span class="n">shell</span>
</span></code></pre></td></tr></table></div></figure>


<p>Load the <code>hello</code> module with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">1</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">(</span><span class="n">hello</span><span class="p">).</span> <span class="p">[</span><span class="nv">Enter</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>And run you first Erlang function&hellip;.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">2</span><span class="o">&gt;</span> <span class="nn">hello</span><span class="p">:</span><span class="nf">just_say</span><span class="p">().</span> <span class="p">[</span><span class="nv">Enter</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Bliss!</p>

<p><img src="http://i.imgur.com/1Sk0c.gif" /></p>

<p>Congratulations. You now have a powerful Erlang development environment in your hands.</p>

<p>Check out <a href="/blog/2013/05/29/a-beginners-guide-to-erlang/">A beginners guide to Erlang</a> to continue your Erlang binge.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/07/selenium-webdriver-for-erlang/">Selenium Webdriver for Erlang Quick Start</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-07T08:18:00+01:00" pubdate data-updated="true">Mar 7<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/03/07/selenium-webdriver-for-erlang/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://docs.seleniumhq.org">Selenium</a> is the industry standard for automated testing of web applications. Together with <a href="http://docs.seleniumhq.org/projects/webdriver/">Webdriver</a>, a &lsquo;remote control&rsquo; API for all major browsers, it enables you to create robust integration test for the browser.</p>

<p>The great people of <a href="http://www.youtube.com/watch?v=_RvIeEAn5P4">QuviQ</a>, creators of the unique <a href="/blog/2013/06/04/continuous-integration-for-erlang-with-travis-ci/">Quickcheck</a> test framework, created an Erlang Webdriver client implementation (<a href="https://github.com/Quviq/webdrv">Github repository</a>).</p>

<p>It&rsquo;s trivial to get started with the following steps:</p>

<h2>Step 1: Add webdrv to the rebar.config of your project</h2>

<p>Open <code>rebar.config</code> in your favorite editor, and make sure webdrv is listed as dependency. I use a fork of the original repository that support rebar:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">{</span><span class="n">deps</span><span class="p">,</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span><span class="n">webdrv</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">git</span><span class="p">,</span> <span class="s">&quot;https://github.com/ehedenst/webdrv.git&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">branch</span><span class="p">,</span> <span class="s">&quot;master&quot;</span><span class="p">}}},</span>
</span><span class='line'>       <span class="p">]}.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 2: Get and compile webdrv</h2>

<p>Go to the root of your Erlang project and execute:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rebar get-deps compile
</span></code></pre></td></tr></table></div></figure>


<h2>Step 3: Get &amp; start the Google chromedriver</h2>

<p>For this quick start we will be using the <a href="https://sites.google.com/a/chromium.org/chromedriver/">Google Chromedriver</a>. Get the right package for your environment <a href="http://chromedriver.storage.googleapis.com/index.html?path=2.9/">here</a>. I&rsquo;m now on a Mac, so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -O http://chromedriver.storage.googleapis.com/2.9/chromedriver_mac32.zip
</span><span class='line'><span class="nv">$ </span>unzip chromedriver_mac32.zip
</span><span class='line'><span class="nv">$ </span>./chromedriver
</span></code></pre></td></tr></table></div></figure>


<p>The last line starts up the Chromedriver server and if all went well, you should get the following output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Starting ChromeDriver <span class="o">(</span>v2.9.248307<span class="o">)</span> on port 9515
</span></code></pre></td></tr></table></div></figure>


<p>Important! This server needs to be running during test execution.</p>

<h2>Step 4:  Your first Erlang webdrvr test!</h2>

<p>Save the following module in <code>src/random_org_test.erl</code>. In this test we open a page, fill in a form, submit the form, and check if an expected piece of text is indeed present in the response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">random_org_test</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">include_lib</span><span class="p">(</span><span class="s">&quot;webdrv/include/webdrv.hrl&quot;</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">CHROMEDRIVER</span><span class="p">,</span> <span class="s">&quot;http://localhost:9515/&quot;</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">test</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="p">_</span><span class="nv">Pid</span><span class="p">}</span> <span class="o">=</span> <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">start_session</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="o">?</span><span class="nv">CHROMEDRIVER</span><span class="p">,</span>  <span class="nn">webdrv_cap</span><span class="p">:</span><span class="nf">default_chrome</span><span class="p">(),</span> <span class="mi">10000</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">set_url</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="s">&quot;http://www.random.org/integers/&quot;</span><span class="p">),</span>
</span><span class='line'>    <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">Emin</span><span class="p">}</span> <span class="o">=</span> <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">find_element</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;min&quot;</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">clear_element</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nv">Emin</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">send_value</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nv">Emin</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">),</span>
</span><span class='line'>    <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">Emax</span><span class="p">}</span> <span class="o">=</span> <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">find_element</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;max&quot;</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">clear_element</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nv">Emax</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">send_value</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nv">Emax</span><span class="p">,</span> <span class="s">&quot;15&quot;</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">submit</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nv">Emax</span><span class="p">),</span>
</span><span class='line'>    <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">PageSource</span><span class="p">}</span> <span class="o">=</span> <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">get_page_source</span><span class="p">(</span><span class="n">test</span><span class="p">),</span>
</span><span class='line'>    <span class="nn">string</span><span class="p">:</span><span class="nf">str</span><span class="p">(</span><span class="nv">PageSource</span><span class="p">,</span> <span class="s">&quot;Here are your random numbers&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nn">webdrv_session</span><span class="p">:</span><span class="nf">stop_session</span><span class="p">(</span><span class="n">test</span><span class="p">).</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Step 5: Run the test</h2>

<p>Run your test by opening up the Erlang shell..</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>erl -pa ebin deps/*/ebin
</span></code></pre></td></tr></table></div></figure>


<p>..and execute the test function</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>1&gt; random_org_test:test<span class="o">()</span>.
</span></code></pre></td></tr></table></div></figure>


<p>You should see the Chrome browser opening in the background, quickly flashing some pages, closing, and on the Erlang shell the anticlamatic output <code>ok</code>.</p>

<h2>Further information</h2>

<ul>
<li><a href="http://www.youtube.com/watch?v=_RvIeEAn5P4">Watch the Erlang Factory presentation by Hans Svensson from Quviq</a></li>
<li><a href="https://github.com/Quviq/webdrv">Erlang Webdrvr Github repository</a></li>
<li><a href="http://docs.seleniumhq.org/docs/03_webdriver.jsp">Selenium Webdriver documentation</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Ward Bekker -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wardbekkerblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
